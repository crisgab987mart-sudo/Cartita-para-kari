<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>K ‚ù§Ô∏è C</title>

<style>
body{
    margin:0;
    overflow:hidden;
    background:black;
    font-family:'Courier New', monospace;
    color:white;
    text-align:center;
}

/* CENTRAR TEXTO */
.center{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    width:90%;
}

/* TEXTO M√ÅQUINA */
#typeText{
    font-size:22px;
    min-height:60px;
}

/* BOTONES */
.option{
    margin:15px;
    padding:12px 25px;
    font-size:18px;
    border:none;
    border-radius:25px;
    cursor:pointer;
    transition:.3s;
}

#yes{
    background:#ff4d88;
    color:white;
}

#no{
    background:#444;
    color:white;
    position:absolute;
}

canvas{
    position:absolute;
    top:0;
    left:0;
}
</style>
</head>
<body>

<div class="center" id="startScreen">
    <div id="typeText"></div>
    <br>
    <button id="yes" class="option">‚ú® Descubre tu sorpresa üíñ</button>
    <button id="no" class="option">üôà No quiero</button>
</div>

<canvas id="canvas"></canvas>

<audio id="music" src="TU_MUSICA.mp3"></audio>

<script>
const text="Tengo algo especial para ti...";
let i=0;
function typeWriter(){
    if(i<text.length){
        document.getElementById("typeText").innerHTML+=text.charAt(i);
        i++;
        setTimeout(typeWriter,50);
    }
}
typeWriter();

/* BOT√ìN QUE NO SE SALE */
const noBtn=document.getElementById("no");
noBtn.addEventListener("mouseover",()=>{
    const maxX=window.innerWidth-noBtn.offsetWidth-10;
    const maxY=window.innerHeight-noBtn.offsetHeight-10;

    const x=Math.random()*maxX;
    const y=Math.random()*maxY;

    noBtn.style.left=x+"px";
    noBtn.style.top=y+"px";
});

/* CANVAS */
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

window.addEventListener("resize",()=>{
    canvas.width=window.innerWidth;
    canvas.height=window.innerHeight;
});

/* ESTRELLAS PARPADEO */
let stars=[];
for(let s=0;s<80;s++){
    stars.push({
        x:Math.random()*canvas.width,
        y:Math.random()*canvas.height,
        size:Math.random()*2,
        alpha:Math.random()
    });
}

function drawStars(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    stars.forEach(star=>{
        ctx.beginPath();
        ctx.arc(star.x,star.y,star.size,0,Math.PI*2);
        ctx.fillStyle="rgba(255,255,255,"+star.alpha+")";
        ctx.fill();
        star.alpha+= (Math.random()-0.5)*0.05;
        if(star.alpha<=0)star.alpha=0;
        if(star.alpha>=1)star.alpha=1;
    });
    requestAnimationFrame(drawStars);
}
drawStars();

/* SORPRESA */
document.getElementById("yes").addEventListener("click",()=>{
    document.getElementById("startScreen").style.display="none";
    document.getElementById("music").play();
    setTimeout(()=>{animateConstellation();},500);
});

/* CONSTELACI√ìN */
let constellationStars=[
{x:canvas.width/2-150,y:canvas.height/2-80},
{x:canvas.width/2-150,y:canvas.height/2+80},
{x:canvas.width/2-80,y:canvas.height/2},
{x:canvas.width/2-150,y:canvas.height/2},
{x:canvas.width/2-80,y:canvas.height/2+80},

{x:canvas.width/2-20,y:canvas.height/2-40},
{x:canvas.width/2,y:canvas.height/2-80},
{x:canvas.width/2+20,y:canvas.height/2-40},
{x:canvas.width/2,y:canvas.height/2},

{x:canvas.width/2+80,y:canvas.height/2-80},
{x:canvas.width/2+40,y:canvas.height/2-80},
{x:canvas.width/2+40,y:canvas.height/2+80},
{x:canvas.width/2+80,y:canvas.height/2+80}
];

let progress=0;
let finished=false;
let glow=8;

function animateConstellation(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    constellationStars.forEach(s=>{
        ctx.beginPath();
        ctx.arc(s.x,s.y,4,0,Math.PI*2);
        ctx.fillStyle="white";
        ctx.fill();
    });

    ctx.strokeStyle="white";
    ctx.lineWidth=1.5;
    ctx.beginPath();

    function drawLine(a,b,delay){
        if(progress>delay){
            let t=Math.min((progress-delay)/25,1);
            let x=a.x+(b.x-a.x)*t;
            let y=a.y+(b.y-a.y)*t;
            ctx.moveTo(a.x,a.y);
            ctx.lineTo(x,y);
        }
    }

    // K
    drawLine(constellationStars[0],constellationStars[2],0);
    drawLine(constellationStars[1],constellationStars[3],15);
    drawLine(constellationStars[1],constellationStars[4],30);

    // C
    drawLine(constellationStars[9],constellationStars[10],0);
    drawLine(constellationStars[10],constellationStars[11],15);
    drawLine(constellationStars[11],constellationStars[12],30);

    // Coraz√≥n
    drawLine(constellationStars[5],constellationStars[6],80);
    drawLine(constellationStars[6],constellationStars[8],95);
    drawLine(constellationStars[8],constellationStars[7],110);
    drawLine(constellationStars[7],constellationStars[5],125);

    if(finished){
        ctx.shadowColor="white";
        ctx.shadowBlur=glow;
    }

    ctx.stroke();
    ctx.shadowBlur=0;

    progress++;

    if(progress<200){
        requestAnimationFrame(animateConstellation);
    }else{
        finished=true;
        pulse();
    }
}

function pulse(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    constellationStars.forEach(s=>{
        ctx.beginPath();
        ctx.arc(s.x,s.y,4,0,Math.PI*2);
        ctx.fillStyle="white";
        ctx.fill();
    });

    ctx.shadowColor="white";
    ctx.shadowBlur=glow;
    ctx.beginPath();

    const lines=[[0,2],[1,3],[1,4],[9,10],[10,11],[11,12],[5,6],[6,8],[8,7],[7,5]];

    lines.forEach(l=>{
        ctx.moveTo(constellationStars[l[0]].x,constellationStars[l[0]].y);
        ctx.lineTo(constellationStars[l[1]].x,constellationStars[l[1]].y);
    });

    ctx.stroke();
    ctx.shadowBlur=0;

    glow+=0.5;
    if(glow>18)glow=8;

    requestAnimationFrame(pulse);
}
</script>

</body>
</html>
