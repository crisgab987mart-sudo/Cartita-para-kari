<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üíñPara Karimeüíñ</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Cormorant+Garamond:wght@400;500&display=swap" rel="stylesheet">

<style>

/* ==============================
   CONFIG GENERAL
============================== */

body{
margin:0;
padding:0;
background:black;
color:white;
overflow:hidden;
font-family:'Cormorant Garamond', serif;
}

/* ==============================
   FONDO 3 CAPAS PARALLAX
============================== */

#background{
position:fixed;
width:100%;
height:100%;
top:0;
left:0;
overflow:hidden;
z-index:0;
}

.layer{
position:absolute;
width:100%;
height:100%;
pointer-events:none;
}

.star{
position:absolute;
border-radius:50%;
background:white;
opacity:0;
animation:twinkle infinite alternate;
}

@keyframes twinkle{
0%{opacity:0.2;}
100%{opacity:1;}
}

/* ==============================
   FADE CINEMATOGR√ÅFICO
============================== */

.fade{
position:fixed;
width:100%;
height:100%;
background:black;
opacity:0;
pointer-events:none;
transition:2s;
z-index:50;
}

/* ==============================
   PANTALLA INICIAL
============================== */

#inicio{
position:fixed;
top:50%;
left:50%;
transform:translate(-50%,-50%);
text-align:center;
z-index:10;
}

h1{
font-family:'Great Vibes', cursive;
font-size:65px;
text-shadow:0 0 30px #ff4da6;
animation:tituloGlow 3s infinite alternate;
}

@keyframes tituloGlow{
0%{text-shadow:0 0 20px #ff4da6;}
100%{text-shadow:0 0 70px #ff99cc;}
}

.botones{
margin-top:50px;
display:flex;
gap:40px;
justify-content:center;
}

button{
padding:18px 40px;
border:none;
border-radius:50px;
font-size:18px;
cursor:pointer;
min-width:220px;
transition:0.3s;
}

.si{
background:#ff4da6;
color:white;
box-shadow:0 0 20px #ff4da6;
}

.no{
background:#444;
color:white;
position:relative;
}

/* ==============================
   CONSTELACION
============================== */

#constelacion{
position:fixed;
width:100%;
height:100%;
display:none;
z-index:5;
}

svg{
position:absolute;
width:100%;
height:100%;
}

.linea{
stroke:white;
stroke-width:2;
stroke-dasharray:600;
stroke-dashoffset:600;
animation:dibujar 5s forwards;
filter:drop-shadow(0 0 8px white);
}

@keyframes dibujar{
to{stroke-dashoffset:0;}
}

.corazon{
stroke:#ff4da6;
stroke-width:3;
fill:none;
stroke-dasharray:800;
stroke-dashoffset:800;
animation:dibujar 6s forwards 2s, latido 2s infinite 8s;
transform-origin:center;
filter:drop-shadow(0 0 20px #ff4da6);
}

@keyframes latido{
0%,100%{transform:scale(1);}
50%{transform:scale(1.1);}
}

/* ==============================
   ESTRELLA FUGAZ
============================== */

.fugaz{
position:absolute;
width:4px;
height:200px;
background:linear-gradient(white,transparent);
transform:rotate(45deg);
opacity:0;
}

/* ==============================
   CARTA
============================== */

#carta{
display:none;
position:fixed;
top:8vh;
left:50%;
transform:translateX(-50%);
width:85%;
max-width:750px;
max-height:82vh;
overflow-y:auto;
z-index:20;
}

#texto{
font-size:26px;
line-height:1.9;
white-space:pre-line;
text-align:left;
padding:20px 30px;
}

.cursor{
display:inline-block;
width:3px;
background:white;
margin-left:5px;
animation:blink 1s infinite;
}

@keyframes blink{
0%,50%,100%{opacity:1;}
25%,75%{opacity:0;}
}

#foto{
width:300px;
margin-top:30px;
border-radius:20px;
opacity:0;
transform:scale(0.8);
transition:3s;
}

.zoom{
opacity:1;
transform:scale(1);
}

@keyframes flotar{
0%{transform:translateY(0);opacity:1;}
100%{transform:translateY(-800px);opacity:0;}
}

</style>
</head>
<body>

<div id="background">
<div class="layer" id="layer1"></div>
<div class="layer" id="layer2"></div>
<div class="layer" id="layer3"></div>
</div>

<div class="fade" id="fade"></div>

<div id="inicio">
<h1>üíñPara Karimeüíñ</h1>
<div class="botones">
<button id="btnSi" class="si">Descubrir sorpresa</button>
<button id="btnNo" class="no">No</button>
</div>
</div>

<div id="constelacion">
<svg viewBox="0 0 1000 600">
<line class="linea" x1="300" y1="150" x2="300" y2="450"/>
<line class="linea" x1="300" y1="300" x2="450" y2="150"/>
<line class="linea" x1="300" y1="300" x2="450" y2="450"/>
<path class="linea" d="M750 200 Q600 300 750 400"/>
<path class="corazon" d="
M500 350
C500 300 560 300 560 350
C560 300 620 300 620 350
C620 420 560 470 560 470
C560 470 500 420 500 350"/>
</svg>
<div class="fugaz" id="fugaz"></div>
</div>

<div id="carta">
<div id="texto"></div><span class="cursor"></span>
<img id="foto" src="foto.png">
</div>

<audio id="audioSi" src="sorpresa.mp3"></audio>
<audio id="audioNo" src="buh.mp3"></audio> 
   <script>

/* ============================
   VARIABLES
============================ */

const layer1 = document.getElementById("layer1");
const layer2 = document.getElementById("layer2");
const layer3 = document.getElementById("layer3");

const btnSi = document.getElementById("btnSi");
const btnNo = document.getElementById("btnNo");
const audioSi = document.getElementById("audioSi");
const audioNo = document.getElementById("audioNo");
const constelacion = document.getElementById("constelacion");
const fade = document.getElementById("fade");
const texto = document.getElementById("texto");
const foto = document.getElementById("foto");
const fugaz = document.getElementById("fugaz");

let generador;
let fugazInterval;
let estrellasActivas = true;

/* ============================
   GENERADOR CONTINUO 3 CAPAS
============================ */

function crearEstrella(layer, velocidad){

let star = document.createElement("div");
star.classList.add("star");

let size = Math.random()*3+1;
star.style.width = size+"px";
star.style.height = size+"px";

star.style.left = Math.random()*window.innerWidth+"px";
star.style.top = "-10px";

star.style.animationDuration = (2+Math.random()*4)+"s";

layer.appendChild(star);

function mover(){
if(!estrellasActivas) return;

star.style.top = (parseFloat(star.style.top)+velocidad)+"px";

if(parseFloat(star.style.top) > window.innerHeight){
star.remove();
return;
}

requestAnimationFrame(mover);
}

mover();
}

function iniciarFondo(){

generador = setInterval(()=>{
crearEstrella(layer1,0.3);
crearEstrella(layer2,0.6);
crearEstrella(layer3,1);
},150);

}

/* ============================
   ESTRELLA FUGAZ + PART√çCULAS
============================ */

function iniciarFugaz(){

fugazInterval = setInterval(()=>{

fugaz.style.transition="none";
fugaz.style.opacity=0;
fugaz.style.left="-300px";
fugaz.style.top="-300px";

setTimeout(()=>{
fugaz.style.transition="4s linear";
fugaz.style.opacity=1;
fugaz.style.left="120vw";
fugaz.style.top="120vh";
crearParticulas();
},100);

},6000);

}

function crearParticulas(){

for(let i=0;i<25;i++){

let p=document.createElement("div");
p.classList.add("star");

let size=Math.random()*2+1;
p.style.width=size+"px";
p.style.height=size+"px";

p.style.left=Math.random()*window.innerWidth+"px";
p.style.top=Math.random()*window.innerHeight+"px";

p.style.animationDuration="1s";

document.getElementById("background").appendChild(p);

setTimeout(()=>p.remove(),1000);

}

}

/* ============================
   BOT√ìN NO
============================ */

btnNo.addEventListener("click",(e)=>{

e.stopPropagation();

audioNo.currentTime=0;
audioNo.play().catch(()=>{});

btnNo.style.position="fixed";

let x=Math.random()*(window.innerWidth-btnNo.offsetWidth);
let y=Math.random()*(window.innerHeight-btnNo.offsetHeight);

btnNo.style.left=x+"px";
btnNo.style.top=y+"px";

});

/* ============================
   BOT√ìN SI
============================ */

btnSi.addEventListener("click",async()=>{

try{
await audioSi.play();
}catch(e){}

constelacion.style.display="block";
iniciarFugaz();

/* transici√≥n */

setTimeout(()=>{
fade.style.opacity=1;
},10000);

setTimeout(()=>{
estrellasActivas=false;
clearInterval(fugazInterval);
fade.style.opacity=0;
constelacion.style.display="none";
mostrarCarta();
},12000);

});

/* ============================
   CARTA
============================ */

function mostrarCarta(){
document.getElementById("inicio").style.display="none";
document.getElementById("carta").style.display="block";
escribirTexto();
}

const mensaje=`Hola, Karime:
No quer√≠a dejar pasar este 14 de febrero sin decirte algo. Aunque llevamos poco tiempo de conocernos, tengo que confesarte que te has convertido en mi parte favorita del d√≠a. Me encanta la forma en la que conectamos y lo mucho que disfruto cada minuto a tu lado. Quiz√°s es pronto para muchas cosas, pero es el momento justo para decirte que me encantas y que me hace muy feliz estar conoci√©ndote.
¬°Feliz San Valent√≠n!`;

function escribirTexto(){

let i=0;

function escribir(){
if(i<mensaje.length){
texto.innerHTML+=mensaje.charAt(i);
i++;
setTimeout(escribir,30);
}else{
foto.classList.add("zoom");
lanzarCorazones();
}
}

escribir();
}

/* ============================
   CORAZONES FINALES
============================ */

function lanzarCorazones(){

for(let i=0;i<70;i++){

let c=document.createElement("div");
c.innerHTML="üíñ";
c.style.position="fixed";
c.style.left=Math.random()*window.innerWidth+"px";
c.style.top=window.innerHeight+"px";
c.style.fontSize=(20+Math.random()*30)+"px";
c.style.animation="flotar 6s linear forwards";

document.body.appendChild(c);

setTimeout(()=>c.remove(),6000);

}

}

/* ============================
   INICIO AUTOM√ÅTICO FONDO
============================ */

iniciarFondo();

</script>

</body>
</html>
