<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Para Karime üíñ</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Cormorant+Garamond:wght@400;500&display=swap" rel="stylesheet">

<style>

body{
    margin:0;
    padding:0;
    background:black;
    overflow:hidden;
    font-family:'Cormorant Garamond', serif;
    color:white;
}

/* T√çTULO ROM√ÅNTICO */
h1{
    font-family:'Great Vibes', cursive;
    font-size:52px;
    letter-spacing:2px;
    text-shadow:0 0 15px rgba(255,77,166,0.6);
}

/* CENTRADO PERFECTO */
#inicio{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    text-align:center;
    width:90%;
}

/* ESTRELLAS */
@keyframes parpadear{
    0%{opacity:0.2;}
    50%{opacity:1;}
    100%{opacity:0.2;}
}

/* BOTONES */
.botones{
    margin-top:30px;
    display:flex;
    justify-content:center;
    align-items:center;
    gap:20px;
    flex-wrap:wrap;
}

button{
    padding:12px 28px;
    border:none;
    border-radius:30px;
    font-size:18px;
    cursor:pointer;
    min-width:180px;
    font-family:'Cormorant Garamond', serif;
}

.si{
    background:#ff4da6;
    color:white;
}

.no{
    background:#444;
    color:white;
}

/* CARTA */
#carta{
    display:none;
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    width:85%;
    max-width:650px;
    text-align:center;
}

#texto{
    font-size:26px;
    line-height:1.6;
    min-height:150px;
}

#foto{
    width:260px;
    margin-top:20px;
    border-radius:20px;
    opacity:0;
    transition:2s;
}

/* CORAZONES */
@keyframes flotar{
    0%{transform:translateY(0);opacity:1;}
    100%{transform:translateY(-600px);opacity:0;}
}

</style>
</head>
<body>

<div id="inicio">
    <h1>Con cari√±o para Karime üíñ</h1>

    <div class="botones">
        <button class="si" onclick="iniciarConstelacion()">Descubrir sorpresa</button>
        <button id="btnNo" class="no"
            onmouseover="moverNo()"
            ontouchstart="moverNo()">
            No
        </button>
    </div>
</div>

<canvas id="canvas" style="display:none;"></canvas>

<div id="carta">
    <div id="texto"></div>
    <img id="foto" src="foto.PNG">
</div>

<audio id="buh" src="buh.mp3"></audio>
<audio id="musica" src="sorpresa.mp3"></audio>

<script>

/* ESTRELLAS */
for(let i=0;i<150;i++){
    const estrella=document.createElement("div");
    estrella.style.position="fixed";
    estrella.style.width=Math.random()*3+1+"px";
    estrella.style.height=estrella.style.width;
    estrella.style.background="white";
    estrella.style.borderRadius="50%";
    estrella.style.top=Math.random()*100+"vh";
    estrella.style.left=Math.random()*100+"vw";
    estrella.style.opacity=Math.random();
    estrella.style.animation=`parpadear ${Math.random()*3+2}s infinite`;
    document.body.appendChild(estrella);
}

/* BOT√ìN NO */
function moverNo(){
    const boton=document.getElementById("btnNo");
    const margen=20;
    const maxX=window.innerWidth-boton.offsetWidth-margen;
    const maxY=window.innerHeight-boton.offsetHeight-margen;
    boton.style.position="fixed";
    boton.style.left=Math.random()*maxX+"px";
    boton.style.top=Math.random()*maxY+"px";
    document.getElementById("buh").play();
}

/* CONSTELACI√ìN */
function iniciarConstelacion(){

    const musica=document.getElementById("musica");
    musica.play().catch(()=>{});

    document.getElementById("inicio").style.display="none";

    const canvas=document.getElementById("canvas");
    canvas.style.display="block";
    canvas.width=window.innerWidth;
    canvas.height=window.innerHeight;

    const ctx=canvas.getContext("2d");
    const cx=canvas.width/2;
    const cy=canvas.height/2;

    const size = Math.min(canvas.width, canvas.height) * 0.12;
    const separacion = size * 2.2;

    let progreso=0;

    function dibujar(){

        ctx.clearRect(0,0,canvas.width,canvas.height);

        ctx.strokeStyle="white";
        ctx.lineWidth=3;
        ctx.shadowColor="#ff4da6";
        ctx.shadowBlur=20;

        if(progreso>=1){
            ctx.beginPath();
            ctx.moveTo(cx-separacion,cy-size);
            ctx.lineTo(cx-separacion,cy+size);
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(cx-separacion,cy);
            ctx.lineTo(cx-separacion+size*0.7,cy-size);
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(cx-separacion,cy);
            ctx.lineTo(cx-separacion+size*0.7,cy+size);
            ctx.stroke();
        }

        if(progreso>=2){
            ctx.beginPath();
            ctx.arc(cx+separacion,cy,size,0.25*Math.PI,1.75*Math.PI);
            ctx.stroke();
        }

        if(progreso>=3){
            ctx.beginPath();
            ctx.moveTo(cx,cy+size*0.3);
            ctx.bezierCurveTo(cx-size*0.8,cy-size*0.4,cx-size*0.8,cy+size*0.8,cx,cy+size*1.2);
            ctx.bezierCurveTo(cx+size*0.8,cy+size*0.8,cx+size*0.8,cy-size*0.4,cx,cy+size*0.3);
            ctx.stroke();
        }
    }

    const intervalo=setInterval(()=>{
        progreso++;
        dibujar();
        if(progreso>3){
            clearInterval(intervalo);
            setTimeout(()=>{
                canvas.style.display="none";
                mostrarCarta();
            },2000);
        }
    },1200);
}

/* CARTA */
function mostrarCarta(){

    document.getElementById("carta").style.display="block";

    const mensaje=`Este 14 de febrero me gustar√≠a decirte que me alegra mucho habernos encontrado.
Aunque llevamos poco tiempo, tienes algo que me cautiv√≥ desde el primer d√≠a y me encanta la forma en la que te estoy conociendo.
Espero que tengas un d√≠a incre√≠ble üíñ`;

    let i=0;
    const textoDiv=document.getElementById("texto");

    function escribir(){
        if(i<mensaje.length){
            textoDiv.innerHTML+=mensaje.charAt(i);
            i++;
            setTimeout(escribir,35);
        }else{
            document.getElementById("foto").style.opacity=1;
            lanzarCorazones();
        }
    }

    escribir();
}

/* CORAZONES */
function lanzarCorazones(){
    for(let i=0;i<25;i++){
        const corazon=document.createElement("div");
        corazon.innerHTML="üíñ";
        corazon.style.position="fixed";
        corazon.style.left=Math.random()*100+"vw";
        corazon.style.bottom="0";
        corazon.style.fontSize=Math.random()*20+20+"px";
        corazon.style.animation=`flotar ${Math.random()*3+3}s linear`;
        document.body.appendChild(corazon);
        setTimeout(()=>{corazon.remove();},5000);
    }
}

</script>
</body>
</html>
