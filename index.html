<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Para Karime</title>

<style>
body{
    margin:0;
    background:black;
    overflow:hidden;
    font-family:'Courier New', monospace;
    text-align:center;
    color:white;
}

canvas{
    position:fixed;
    top:0;
    left:0;
    z-index:0;
}

.container{
    position:relative;
    z-index:5;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    height:100vh;
}

#typeText{
    font-size:28px;
    min-height:60px;
    color:white;
}

#mensaje{
    margin-top:20px;
    font-size:20px;
    max-width:80%;
    min-height:80px;
}

.option{
    margin:10px auto;
    padding:12px 25px;
    font-size:18px;
    border:none;
    border-radius:25px;
    cursor:pointer;
    transition:.3s;
}

#yes{
    background:#ff4d6d;
    color:white;
}

#no{
    background:#444;
    color:white;
}
</style>
</head>

<body>

<canvas id="canvas"></canvas>

<div class="container">
    <div id="typeText"></div>

    <button id="yes" class="option">üíå Descubre tu sorpresa</button>
    <button id="no" class="option">üôà No</button>

    <div id="mensaje"></div>
</div>

<audio id="buh" src="buh.mp3"></audio>
<audio id="music" src="sorpresa.mp3"></audio>

<script>
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

/* ‚≠ê Estrellas cinematogr√°ficas */
let stars=[];
for(let i=0;i<180;i++){
    stars.push({
        x:Math.random()*canvas.width,
        y:Math.random()*canvas.height,
        r:Math.random()*2.5,
        alpha:Math.random(),
        speed:(Math.random()*0.015)+0.003,
        direction:1,
        glow:Math.random()>0.7
    });
}

function drawStars(){
    stars.forEach(s=>{
        if(s.alpha<=0.2){ s.direction=1; }
        if(s.alpha>=1){ s.direction=-1; }

        s.alpha+=s.speed*s.direction;

        if(s.glow){
            ctx.shadowBlur=15;
            ctx.shadowColor="white";
        }else{
            ctx.shadowBlur=0;
        }

        ctx.fillStyle="rgba(255,255,255,"+s.alpha+")";
        ctx.beginPath();
        ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
        ctx.fill();
        ctx.shadowBlur=0;
    });
}

/* ‚ú® Coordenadas centradas autom√°ticamente */
function centerShape(points,offsetX){
    return points.map(p=>({
        x:canvas.width/2 + p.x + offsetX,
        y:canvas.height/2 + p.y
    }));
}

const K=centerShape([
    {x:-180,y:-80},{x:-180,y:80},
    {x:-180,y:0},{x:-120,y:-80},
    {x:-180,y:0},{x:-120,y:80}
],0);

const C=centerShape([
    {x:120,y:-60},{x:60,y:-80},
    {x:0,y:-40},{x:0,y:40},
    {x:60,y:80},{x:120,y:60}
],0);

const heart=centerShape([
    {x:-30,y:-20},{x:-60,y:-50},
    {x:-90,y:-20},{x:0,y:80},
    {x:90,y:-20},{x:60,y:-50},
    {x:30,y:-20}
],0);

let progress=0;

function drawLines(points,count){
    ctx.strokeStyle="white";
    ctx.shadowBlur=20;
    ctx.shadowColor="white";
    ctx.lineWidth=2;
    ctx.beginPath();
    for(let i=0;i<count && i<points.length;i++){
        if(i===0){
            ctx.moveTo(points[i].x,points[i].y);
        }else{
            ctx.lineTo(points[i].x,points[i].y);
        }
    }
    ctx.stroke();
    ctx.shadowBlur=0;
}

function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    drawStars();

    if(progress<K.length){
        drawLines(K,progress);
        drawLines(C,progress);
    }else{
        drawLines(K,K.length);
        drawLines(C,C.length);
    }

    if(progress>K.length){
        drawLines(heart,progress-K.length);
    }

    progress+=0.05;
    requestAnimationFrame(animate);
}
animate();

/* ‚å®Ô∏è M√°quina de escribir */
const text="üíñPara Karimeüíñ";
let i=0;
function typeWriter(){
    if(i<text.length){
        document.getElementById("typeText").innerHTML+=text.charAt(i);
        i++;
        setTimeout(typeWriter,80);
    }
}
typeWriter();

/* üíå Mensaje sorpresa */
const mensajeFinal="‚ú® Este 14 de febrero me alegra haberte encontrado. Aunque llevamos poco tiempo, tienes algo especial que me encanta descubrir cada d√≠a. ‚ú®";

document.getElementById("yes").addEventListener("click",()=>{
    document.getElementById("music").play();
    let j=0;
    const mensajeDiv=document.getElementById("mensaje");
    mensajeDiv.innerHTML="";
    function escribir(){
        if(j<mensajeFinal.length){
            mensajeDiv.innerHTML+=mensajeFinal.charAt(j);
            j++;
            setTimeout(escribir,40);
        }
    }
    escribir();
});

/* üôà Bot√≥n No que no sale de pantalla */
const noBtn=document.getElementById("no");

function moveButton(){
    const maxX=window.innerWidth-noBtn.offsetWidth-20;
    const maxY=window.innerHeight-noBtn.offsetHeight-20;
    noBtn.style.position="fixed";
    noBtn.style.left=Math.random()*maxX+"px";
    noBtn.style.top=Math.random()*maxY+"px";
    document.getElementById("buh").play();
}

noBtn.addEventListener("mouseover",moveButton);
noBtn.addEventListener("click",moveButton);

</script>
</body>
</html>
